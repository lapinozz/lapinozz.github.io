<!DOCTYPE html>
<html>

  <head>
  <!---
  Spaghetti Base Redesign
  -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Facechat - Custom chat api</title>
  <meta name="description" content="Facechat">
  <meta name="google-site-verification" content="WWP0tS0N_Dm8-FTd9oqyZta0oRCDYUFy24R7zSm06Vs" />
  <meta name="msvalidate.01" content="779064655F047D704FFFD2122C3591F3" />
  <link rel="stylesheet" href="/assets/css/alternative.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link href="//cdnjs.cloudflare.com/ajax/libs/typicons/2.0.7/typicons.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/octicons/3.4.1/octicons.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  
  <link rel="canonical" href="http://localhost:4000/learning/2016/06/07/facechat-facebook-chat-api.html">
  <link rel="alternate" type="application/rss+xml" title="Placeholder" href="http://localhost:4000/feed.xml">


<! google analytic >
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-74344870-1', 'auto');
  ga('send', 'pageview');
</script>


<! strike through >
<script>
(function() {
  function strikethrough(){
    document.body.innerHTML = document.body.innerHTML.replace(
      /\~\~(.+?)\~\~/gim,
      '<del>$1</del>'
    );
    
  }
  strikethrough();
})();
</script>

</head>


  <Body>

    <header class="site-header">
  <div class="wrapper">
<div class="pacel "><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>
  <a id="route" class="site-title" href="/">Placeholder<div style="margin: 3px 20px; font-size: 15px; float: right; white-space: pre; display:inline-block">//TODO: F̶i̶n̶d̶ ̶a̶ ̶n̶a̶m̶e̶  delete this todo</div></a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          
          
        
          
          
          <a id="route" class="page-link" href="/about.html">About</a>
          
          
        
          
          
          <a id="route" class="page-link" href="/archive.html">Archive</a>
          
          
        
          
        
          
        
          
        
          
        
          
          
          <a id="route" class="page-link" href="/project.html">Project</a>
          
          
        
          
        
          
        
          
          
          
        
          
        
          
        
          
        
        <a class="page-link" href="http://lapinozz.github.io/feed.xml"> Feeds</a>
        <a class="page-link" href="http://github.com/lapinozz?tab=repositories"><i class="typico typcn typcn-social-github" style="font-size:"></i> Repositories</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div style="margin: 4.5rem auto;">

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="inpost-header">
    <h1 class="inpost-title" itemprop="name headline">Facechat - Custom chat api</h1>
    <div style="float:right">
    <h1>
     <i class="typico typcn typcn-messages" style="    position: relative;
    top: 0px;
    font-size: 25px;"></i> <a class="disqus-comment-count" href="#disqus_thread" data-disqus-identifier="/learning/2016/06/07/facechat-facebook-chat-api" style="color:#fff"> 0</a>
    </h1>
    
    <h1 style="">
    <i class="typcn typcn-social-github"></i><a style="color: #5BFFD5;" href="">GitHub Page</a>
    </h1>
  
  </div>
    
   
    

 
 
  

    
    
    </p>
  
  </header>
  
  
  
  
  <div class="post-content" itemprop="articleBody">
    <h2 id="facechat">Facechat</h2>

<h1 id="why">Why?</h1>

<p>If you followed my previous post you may know that I tend to go on <abbr title="Internet Relay Chat">IRC</abbr> and that we have there some pretty cool bots. I was swapping between a conversation on <abbr title="Internet Relay Chat">IRC</abbr> and one on Facebook when an idea struck me, how cool would it be to have those bots functionalitys directly in Facebook’s chat? And even better, how about reading and writting Facebook’s messages in <abbr title="Internet Relay Chat">IRC</abbr> chat or reading and writing <abbr title="Internet Relay Chat">IRC</abbr>’s messages on Facebook? Awesome!</p>

<h1 id="why-unofficial">Why “Unofficial”?</h1>

<p>It should be easy, right? Facebook must have an API for sending and receiving messages, surely they have something like a REST API? Well… No. It turns out that they had an XMPP API that they shot down on April 30, 2014 <sup id="fnref:n"><a href="#fn:n" class="footnote">1</a></sup>. They still had a service to read the inbox but they put it down too, exactly one year later on April 30, 2015 <sup id="fnref:n:1"><a href="#fn:n" class="footnote">1</a></sup>. Since there was no official API I had to create my own.</p>

<h1 id="how">How?</h1>

<p>The idea is that if your browser can connect to Faceboos and send messages, then your program can too, as the browser is just another program. When the you go to Facebook’s login page you receive an html page and some js scripts, when you enter your identifiant and hit enter the scripts generate data to send to the server to make https request to establish a connection. Now a theoretical way our program could do that would be to simulate the whole browser, html parser, js code interpreter etc. The problem with this thechnique is that it makes a big dependency and it does way more than we need, we only need to send and receive specifique https responses and know how to generate/decode them.
To do that we completely forget what our browser is doing and only look at the https request sent to Facebook and the response and we try to guess how they were generated. So rather than trying to execute the js code or understand it, we make our own code, that works in the way we want it. Let me give you an example.</p>

<p>I open my browser (Firefox) and launch a plugin called “Live HTTPS headers” that logs all https requests my browser makes. I open facebook.com and login then I send a message “test”.</p>

<p>Here’s the https request that my browser made.<br />
As you can see, for a question of privacy I obfuscated the user ids.</p>

<figure class="highlight"><pre><code class="language-txt" data-lang="txt"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre>POST /ajax/mercury/send_messages.php?
message_batch[0][action_type]=ma-type:user-generated-message
message_batch[0][thread_id]
message_batch[0][author]=fbid:100000*******67
message_batch[0][author_email]
message_batch[0][timestamp]=1467513329087
message_batch[0][timestamp_absolute]=Aujourd'hui
message_batch[0][timestamp_relative]=22:35
message_batch[0][timestamp_time_passed]=0
message_batch[0][is_unread]=false
message_batch[0][is_forward]=false
message_batch[0][is_filtered_content]=false
message_batch[0][is_filtered_content_bh]=false
message_batch[0][is_filtered_content_account]=false
message_batch[0][is_filtered_content_quasar]=false
message_batch[0][is_filtered_content_invalid_app]=false
message_batch[0][is_spoof_warning]=false
message_batch[0][source]=source:chat:web
message_batch[0][source_tags][0]=source:chat
message_batch[0][body]=test
message_batch[0][has_attachment]=false
message_batch[0][html_body]=false
message_batch[0][specific_to_list][0]=fbid:100003*******64
message_batch[0][specific_to_list][1]=fbid:100000*******67
message_batch[0][ui_push_phase]=V3
message_batch[0][status]=0
message_batch[0][offline_threading_id]=6155197026245292939
message_batch[0][message_id]=6155197026245292939
message_batch[0][ephemeral_ttl_mode]=0
message_batch[0][manual_retry_cnt]=0
message_batch[0][other_user_fbid]=100003*******64
client=mercury
__user=100000*******67
__a=1
__dyn=7AmajEzUGByA5Q9UoGya4A5ER6yUmyUyGiyEyfirWo8popyui9zob4q68K5U4e2O3J1ebkwy8wGFeex3BKuEjKeCwxxRa3CnDBxe6rxCLGqu2PxOcxu5ocE88C9z9oybx24o9Esw
__req=17
__be=-1
__pc=PHASED%3ADEFAULT
fb_dtsg=AQG5P4wy1kJ6%3AAQGxD7sfo49g
ttstamp=26581715380521191214910774545865817112068551151021115257103
__rev=2425895</pre></td></tr></tbody></table></code></pre></figure>

<p>That makes a lot of parameters, but actually only a few interests us.</p>

<p>In particular, line 20, the “body” parameter which is set to “test”, exactly our message!<br />
Line 4, 23, 24 and 31 are relative to who sent the message and to whom.<br />
Note: line from 33 to 41 are parameters setup in the login phase, they are used to authentify the connection.</p>

<p>So in my program if I want to add the functionality to send a message (not taking into account sending photos, files etc, which are attachments) all I have to do is fill in all those parameters which are for the most pretty easy to guess what they mean, easier than trying to read the obfuscated js code anyways. Also, most of the parameters are not required for the request to work, here’s a more minimalist request:</p>

<figure class="highlight"><pre><code class="language-txt" data-lang="txt"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre>POST /ajax/mercury/send_messages.php?
message_batch[0][action_type]=ma-type:user-generated-message
message_batch[0][author]=fbid:100000*******67
message_batch[0][source]=source:chat:web
message_batch[0][source_tags][0]=source:chat
message_batch[0][body]=test
message_batch[0][has_attachment]=false
message_batch[0][specific_to_list][0]=fbid:100003*******64
message_batch[0][specific_to_list][1]=fbid:100000*******67
message_batch[0][other_user_fbid]=100003*******64
client=mercury
__user=100000*******67
__a=1
__dyn=7AmajEzUGByA5Q9UoGya4A5ER6yUmyUyGiyEyfirWo8popyui9zob4q68K5U4e2O3J1ebkwy8wGFeex3BKuEjKeCwxxRa3CnDBxe6rxCLGqu2PxOcxu5ocE88C9z9oybx24o9Esw
__req=17
__be=-1
__pc=PHASED%3ADEFAULT
fb_dtsg=AQG5P4wy1kJ6%3AAQGxD7sfo49g
ttstamp=26581715380521191214910774545865817112068551151021115257103
__rev=2425895</pre></td></tr></tbody></table></code></pre></figure>

<p>So if I want to send a message to someone else I just have to replace “test” by the text and put their id (there is a function to find the user id of someone).</p>

<p>For this example it’s not too hard to guess what the parameters are for but for some function it can get much more confusing. Fortunately. I didn’t have to do all that tiedous work by myself, there is the excellent <a href="https://github.com/Schmavery/facebook-chat-api">facebook-chat-api</a> project in nodejs on which I could refer to help me in my coding.</p>

<h1 id="goals">Goals</h1>

<p>The goal of the Facechat library is to cover all functionality in a way that you could make your own messenger client with the features as the official and even more. One example of a use case that is not covered by the official client and which I need is downloading a complete conversation. Anyone that’s ever used Facebook Messenger knows that it’s a real pain to read ancient messages and if the conversation is somewhat long then it’s simply impossible to get to the start. So I made a program that download the complete conversation to a file using my lib.</p>

<h1 id="difficulty">Difficulty</h1>

<p>As mentioned in the previous paragraph I made a concrete program using my lib. But I had some problem, between the time I wrote the lib and the time I got to use it Facebook’s internal working changed and the lib didn’t work anymore. A couple of change and actually a lot of debugging time was required to make it functional again.</p>

<h2 id="facebot">Facebot</h2>

<p>As I said the original intent for writing this lib was to make a bot with the same functionality as some <abbr title="Internet Relay Chat">IRC</abbr> bots and also to channel Facebook’s messages through <abbr title="Internet Relay Chat">IRC</abbr> and vice versa. And that’s what I did in my Facebot project, here’s a list of the available commands which is pretty easy to extend:</p>

<p>#.say</p>

<p>simple command that echo back. eg: <code class="highlighter-rouge">.say text to be echoed</code></p>

<h1 id="g-google">.g, .google</h1>

<p>Google search. eg: <code class="highlighter-rouge">.google how to be as cool as lapinozz?</code><br />
Image search. eg: <code class="highlighter-rouge">.google image cool image</code></p>

<h1 id="y-youtube">.y, .youtube</h1>

<p>Youtube search. eg: <code class="highlighter-rouge">.youtube how to break laws of physic</code></p>

<h1 id="w-wiki-wikipedia">.w, .wiki, .wikipedia</h1>

<p>Wikipedia search. eg: <code class="highlighter-rouge">.wiki proton</code></p>

<h1 id="tr-translate">.tr, .translate</h1>

<p>Translation command. eg: <code class="highlighter-rouge">.tr traduit ce text en englais</code><br />
The default target language is English you can change that like this: <br />
<code class="highlighter-rouge">.tr fr This text will be translated to French</code></p>

<h1 id="def-define">.def, .define</h1>

<p>Get Definition. eg: <code class="highlighter-rouge">.define paradox</code></p>

<h1 id="rnd">.rnd</h1>

<p>Random, word, sentence or paragraph.<br />
eg: <code class="highlighter-rouge">.rnd</code><br />
eg: <code class="highlighter-rouge">.rnd sentence</code><br />
eg: <code class="highlighter-rouge">.rnd paragraph</code></p>

<h1 id="time">.time</h1>

<p>Give the current time. eg: <code class="highlighter-rouge">.time</code>;</p>

<h1 id="userid-userid-userid">.userID, .userId, .userid</h1>

<p>Get the facebook user id of someone. eg: <code class="highlighter-rouge">.userId Marie Gagnon</code></p>

<h1 id="userinfo-userinfo">.userInfo, .userinfo</h1>

<p>Get the facebook information of someone. eg: <code class="highlighter-rouge">.userInfo Marie Gagnon</code></p>

<h1 id="tell">.tell</h1>

<p>Send a mesage to someone. eg: <code class="highlighter-rouge">.tell Marie Gagnon : you'r so sexy today</code><br />
you can also send to multipel personne eg: <code class="highlighter-rouge">.tell Marie Gagnon | Stephanie Gagnon : im not a cheater</code></p>

<h1 id="g-gcc-nasm-my-favourite-command">.g++, .gcc, .nasm (My favourite command)</h1>

<p>Execute code, yes this use cee from BoxBox :D<br />
eg: <code class="highlighter-rouge">.g++ {int i; i = 4*5; cout &lt;&lt; i};</code></p>

<h1 id="choose">.choose</h1>

<p>Randombly choose between multiple choice eg: <code class="highlighter-rouge">.choose choice1|choice2|choice3</code></p>

<p>#.irc</p>

<p><abbr title="Internet Relay Chat">IRC</abbr> commands<br />
eg: <code class="highlighter-rouge">.irc join #sfml</code><br />
eg: <code class="highlighter-rouge">.irc part #sfml</code><br />
eg: <code class="highlighter-rouge">.irc send #sfml im too cool for you</code><br />
eg: <code class="highlighter-rouge">.irc send Nyrox im too cool for you</code><br />
Turn on Facebook to <abbr title="Internet Relay Chat">IRC</abbr> eg: <code class="highlighter-rouge">.irc on</code><br />
Turn off Facebook to <abbr title="Internet Relay Chat">IRC</abbr> eg: <code class="highlighter-rouge">.irc off</code></p>

<p>If Facebook to <abbr title="Internet Relay Chat">IRC</abbr> is turned on each, when someone send a message to you or you send them a message on Facebook it will automaticly connect a <abbr title="Internet Relay Chat">IRC</abbr> user with their name and send you the message in private, you can then replie to that irc user and it will send that replie on facebook.</p>

<h1 id="in">.in</h1>
<p>Send message after a certain time eg: <code class="highlighter-rouge">.in 4m 30s tell me this</code><br />
can also send to someone else eg: <code class="highlighter-rouge">.in 4m 30s Marie Gagnon: tell her this</code><br />
or even to mutiple personne eg: <code class="highlighter-rouge">.in 4m 30s Marie Gagnon | Stephanie Gagnon: i already told you nothing happened between your sister and me</code></p>

<h1 id="limitation">Limitation</h1>

<p>One down side of Facechat is that, contrary to the case where Facebook would have an public API, you can’t use an authentification token, the library user must provide his login credentials which can make it harder for the user to trust the application.</p>

<h1 id="conclusion">Conclusion</h1>

<p>It was a fun project and I plan to add more functionality, if you have any idea or suggestion feel free to contact me by email.</p>

<p>Thank you for reading I hope you did enjoy.</p>

<div class="footnotes">
  <ol>
    <li id="fn:n">
      <p><a href="https://developers.facebook.com/docs/chat">facebook docs</a> <a href="#fnref:n" class="reversefootnote">&#8617;</a> <a href="#fnref:n:1" class="reversefootnote">&#8617;<sup>2</sup></a></p>
    </li>
  </ol>
</div>

  </div>



<div class="arrowNav">
 
 
<div class="arrowLeft">
<a id="route" class="tooltip-right" href="/learning/2016/11/19/calculator-with-caordboard-and-marbles.html" title="
&lt;p class=hoveratas&gt;A 4-bit Calculator made in cardboard and marble&lt;/p&gt; &lt;p class=hoverbawah&gt;## LOGIC ![image](/assets/image/LOGIC/logic_name_full.png) # What is it? LOGIC is a...&lt;/p&gt;
"><i class="typcn typcn-chevron-left" style="    font-size: 30px;
    position: relative;
   
    "></i></a>
</div>


 
<div class="arrowRight" style="float:right">
<a id="route" class="tooltip-left" href="/learning/2016/06/07/lazy-theta-star-pathfinding.html" title="
&lt;p class=hoveratas&gt;Lazy Theta* Any Angle Pathfinding&lt;/p&gt; &lt;p class=hoverbawah&gt;Any angle pathfinding To get smooth path there is a...&lt;/p&gt;
"><i class="typcn typcn-chevron-right" style="    font-size: 30px;
    position: relative;
   
    "></i></a>
</div>

</div>


  <p class="post-meta" style="    background: #00bc8c;
    padding: 15px 0px 15px 20px;"><time datetime="2016-06-07T17:05:23-04:00" itemprop="datePublished"><i class="typcn typcn-calendar-outline"></i> Jun 7, 2016</time> 
    |
  
  <a href="/tags/#C++" style="color: #fff;"><i class="typcn typcn-tags"></i> C++</a>
  
  <a href="/tags/#Networking" style="color: #fff;"><i class="typcn typcn-tags"></i> Networking</a>
  
  <a href="/tags/#IRC" style="color: #fff;"><i class="typcn typcn-tags"></i> IRC</a>
  
  
    |<i class="typcn typcn-social-github"></i><a style="color: #5BFFD5;" href="">GitHub Page</a>
  
  

</article>





<style>
    #disqus_thread {
  overflow: hidden;

  iframe {
    margin-bottom: -54px;
  }
}
</style>

<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
		this.page.url = 'http://localhost:4000/learning/2016/06/07/facechat-facebook-chat-api';
		this.page.identifier = '/learning/2016/06/07/facechat-facebook-chat-api';
	};
    
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = '//theplaceholder.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <h2 class="footer-heading">Placeholder</h2>
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Lapinozz Thech Blog</li>
          <li><a href="mailto:monstrefou@gmail.com">monstrefou@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/lapinozz"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">lapinozz</span></a>

          </li>
          
          
          

          
        </ul>
      </div>
      <div class="footer-col footer-col-3">
        <p>Designed by Spaghetti</p>
        <p>Proudly hosted by <a href="https://pages.github.com/" target="_blank"><span class="octicon octicon-logo-github" style="color: #828282;
    position: relative;
    top: 4px;
    left: 3px;
    font-size: 20px;"></span></a></p>
      </div>
    </div>
  </div>
</footer>
<!--- Where Javascript Loaded --->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript" src="http://iamceege.github.io/tooltipster/js/jquery.tooltipster.js"></script>
<script>
$(document).ready(function() {
	if(location.pathname != "/") {
		$('.trigger a[href^="/' + location.pathname.split("/")[1] + '"]').addClass('active');
	} else $('.none a:eq(0)').addClass('active');
});

</script>
  <script>
        $(document).ready(function() {
            $('.tooltip-right').tooltipster({
                contentAsHTML: true,
                position: 'right',
            });
        });
        $(document).ready(function() {
            $('.tooltip-left').tooltipster({
                contentAsHTML: true,
                position: 'left',
            });
        });

        document.body.innerHTML = document.body.innerHTML.replace(
          /\’/gim,
          '\''
        );
    </script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.pjax/1.9.6/jquery.pjax.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery-autocomplete.js"></script>
<script src="/assets/js/responsive_waterfall.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>
<script>


$(document).ready(function(){$(".menu-icon").click(function(){$(".trigger").toggle()})}),$(function(){$(document).pjax("#route","body",{fragment:"body",timeout:1e5,scrollTo:0,push:!0,maxCacheLength:20,replace:!1})}),$(document).on("pjax:error",function(e,n,t,o,c){return c.success(n.responseText,t,n),!1});var options={url:"/gblk.json",getValue:"title",list:{match:{enabled:!0,maxNumberOfElements:5}},template:{type:"links",fields:{link:"url"}},theme:"square"};$("#countries").easyAutocomplete(options),Pace.on("start",function(){$(".pacel").show()}),Pace.on("done",function(){$(".pacel").hide()}),$(function(){$("img").lazyload({})});var waterfall=new Waterfall({containerSelector:".wf-container",boxSelector:".wf-box",minBoxWidth:180});$(document).ready(function(){$(".menu-icon").click(function(){$(".trigger").toggle()})});
       
</script>
<script id="dsq-count-scr" src="//theplaceholder.disqus.com/count.js" async></script>


  </Body>

</html>
